<div class="product-section-3-container">
  <div class="container">
    <div class="product-list-header text-center my-4">
      <h2 class="product-list-title text-primary" style="color: #630000;">SẢN PHẨM MIỀN NAM</h2>
    </div>

    <div *ngIf="isLoading" class="text-center">
      Loading products...
    </div>

    <div *ngIf="!isLoading && displayedProducts.length > 0" class="row product-list">
      <div *ngFor="let product of displayedProducts" class="col-lg-3 col-md-4 col-sm-6 d-flex align-items-stretch">
        <div class="product-card card shadow-sm" (click)="goToDetail(product._id)">
          <div class="product-image position-relative">
            <img [src]="product.image_1" [alt]="product.product_name" class="card-img-top img-fluid rounded">
            <span class="badge badge-label label-new" *ngIf="product.isNew">New</span>
            <span class="badge badge-label label-discount" *ngIf="product.discount > 0">
              -{{ (product.discount * 100) | number:'1.0-0' }}%
            </span>

            <div class="overlay d-flex flex-column align-items-center justify-content-center">
              <button *ngIf="product.stocked_quantity > 0" class="btn add-to-cart" (click)="addToCart($event, product)">Add to cart</button>
              <div class="actions d-flex justify-content-center mt-2">
                <span class="mx-2" (click)="shareOnFacebook($event, product)">
                  <i class="fas fa-share-alt"></i> Share
                </span>
                <span *ngIf="isLoggedIn" class="mx-2" (click)="toggleLike($event, product._id)">
                  <i class="fas fa-heart"></i> Like
                </span>
              </div>
            </div>
          </div>

          <div class="product-info text-center p-3">
            <h3 class="product-title">{{ product.product_name }}</h3>
            <p class="price">
              <span class="current-price">{{ product.unit_price | currency:'VND' }}</span>
              <span class="original-price text-muted" *ngIf="getOriginalPrice(product)">
                {{ getOriginalPrice(product) | currency:'VND' }}
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="!isLoading && errMessage" class="text-danger text-center">
      {{ errMessage }}
    </div>

    <div class="show-more-container text-center" *ngIf="!isLoading && displayedProducts.length < products.length">
      <button class="btn show-more-btn" (click)="showMore()">SHOW MORE</button>
    </div>
  </div>
</div>
